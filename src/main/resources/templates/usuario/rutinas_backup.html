<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mis Rutinas - FlowFit Usuario</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link th:href="@{/css/usuario-dashboard.css}" rel="stylesheet">
  <link th:href="@{/css/rutinas-usuario.css}" rel="stylesheet">
</head>
<body class="dashboard-bg">

    <!-- Navegación Principal -->
    <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item">
        <a th:href="@{/usuario/dashboard}" class="nav-link active usuario-nav-link" aria-current="page">
          <i class="bi bi-speedometer2 me-3"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li class="nav-item">
        <a th:href="@{/usuario/rutinas}" class="nav-link usuario-nav-link">
          <i class="bi bi-calendar-check me-3"></i>
          <span>Mis Rutinas</span>
        </a>
      </li>
      <li class="nav-item">
        <a th:href="@{/usuario/progreso}" class="nav-link usuario-nav-link">
          <i class="bi bi-graph-up me-3"></i>
          <span>Mi Progreso</span>
        </a>
      </li>
    </ul>

    <!-- Perfil de Usuario -->
    <div class="border-top pt-3 mt-auto">
      <div class="dropdown profile-dropdown-usuario">
        <div class="profile-icon-usuario d-flex align-items-center w-100" id="profileDropdownUsuario" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="/assets/perfil_default.png" alt="Profile" class="profile-image-usuario me-3" style="width: 44px; height: 44px; border-radius: 50%; object-fit: cover; border: 2px solid #4ade80; box-shadow: 0 0 20px rgba(74, 222, 128, 0.3);">
          <div class="flex-grow-1">
            <div class="small fw-bold text-white" th:text="${#strings.substringBefore(usuario.nombre, ' ')}">Usuario</div>
            <div class="small text-usuario-muted">FlowFit VIP</div>
          </div>
          <i class="bi bi-chevron-down text-usuario-accent"></i>
        </div>
        <ul class="dropdown-menu usuario-profile-menu" aria-labelledby="profileDropdownUsuario">
          <li><a class="dropdown-item usuario-dropdown-item" th:href="@{/usuario/perfil}"><i class="bi bi-person-gear me-2"></i>Mi Perfil</a></li>
          <li><a class="dropdown-item usuario-dropdown-item" th:href="@{/usuario/configuracion}"><i class="bi bi-gear me-2"></i>Configuración</a></li>
          <li><a class="dropdown-item usuario-dropdown-item" th:href="@{/usuario/soporte}"><i class="bi bi-headset me-2"></i>Soporte</a></li>
          <li><hr class="dropdown-divider" style="border-color: rgba(74, 222, 128, 0.2);"></li>
          <li><a class="dropdown-item usuario-dropdown-item-danger" th:href="@{/logout}"><i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión</a></li>
        </ul>
      </div>
    </div>
  </nav>
  
  <!-- Main content -->
  <div class="main-content">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div class="d-flex align-items-center">
        <div class="user-avatar me-3">
          <img src="/assets/perfil_default.png" alt="Avatar" class="rounded-circle" style="width: 60px; height: 60px; object-fit: cover; border: 3px solid #4ade80;">
        </div>
        <div>
          <h1>Mis Rutinas de Entrenamiento</h1>
          <p class="lead mb-1">Explora y sigue tus rutinas personalizadas</p>
          <small class="text-muted">
            <i class="bi bi-calendar3 me-1"></i>
            <span th:text="${#dates.format(#dates.createNow(), 'EEEE, dd MMMM yyyy')}">Fecha actual</span>
          </small>
        </div>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-usuario-primary" data-bs-toggle="modal" data-bs-target="#filtrosModal">
          <i class="bi bi-funnel me-2"></i>Filtrar
        </button>
        <a th:href="@{/usuario/progreso}" class="btn btn-outline-usuario">
          <i class="bi bi-graph-up me-2"></i>Ver Progreso
        </a>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="row mb-4">
      <div class="col-lg-3 col-md-6 mb-3">
        <div class="glass-card stats-card">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h4 class="mb-1">5</h4>
              <p class="text-muted mb-0">Rutinas Activas</p>
            </div>
            <div class="stats-icon">
              <i class="bi bi-calendar-check fs-2"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-3">
        <div class="glass-card stats-card">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h4 class="mb-1">12</h4>
              <p class="text-muted mb-0">Rutinas Completadas</p>
            </div>
            <div class="stats-icon">
              <i class="bi bi-check-circle fs-2"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-3">
        <div class="glass-card stats-card">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h4 class="mb-1">3</h4>
              <p class="text-muted mb-0">Esta Semana</p>
            </div>
            <div class="stats-icon">
              <i class="bi bi-lightning fs-2"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-3">
        <div class="glass-card stats-card">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h4 class="mb-1">85%</h4>
              <p class="text-muted mb-0">Cumplimiento</p>
            </div>
            <div class="stats-icon">
              <i class="bi bi-trophy fs-2"></i>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Rutinas Activas -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="glass-card">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4><i class="bi bi-play-circle me-2"></i>Rutinas Activas</h4>
            <span class="badge bg-success">5 activas</span>
          </div>
          
          <div class="row">
            <!-- Rutina 1 -->
            <div class="col-lg-4 col-md-6 mb-3">
              <div class="rutina-card">
                <div class="rutina-header">
                  <h5>Entrenamiento de Fuerza</h5>
                  <span class="badge bg-primary">Intermedio</span>
                </div>
                <div class="rutina-info">
                  <div class="d-flex justify-content-between mb-2">
                    <span><i class="bi bi-clock me-1"></i>45 min</span>
                    <span><i class="bi bi-fire me-1"></i>350 kcal</span>
                  </div>
                  <div class="progress mb-2" style="height: 6px;">
                    <div class="progress-bar bg-success" style="width: 75%;"></div>
                  </div>
                  <small class="text-muted">Progreso: 3/4 ejercicios</small>
                </div>
                <div class="rutina-actions mt-3">
                  <button class="btn btn-usuario-primary btn-sm w-100">
                    <i class="bi bi-play me-1"></i>Continuar
                  </button>
                </div>
              </div>
            </div>

            <!-- Rutina 2 -->
            <div class="col-lg-4 col-md-6 mb-3">
              <div class="rutina-card">
                <div class="rutina-header">
                  <h5>Cardio HIIT</h5>
                  <span class="badge bg-warning">Principiante</span>
                </div>
                <div class="rutina-info">
                  <div class="d-flex justify-content-between mb-2">
                    <span><i class="bi bi-clock me-1"></i>30 min</span>
                    <span><i class="bi bi-fire me-1"></i>280 kcal</span>
                  </div>
                  <div class="progress mb-2" style="height: 6px;">
                    <div class="progress-bar bg-success" style="width: 100%;"></div>
                  </div>
                  <small class="text-success">¡Completado hoy!</small>
                </div>
                <div class="rutina-actions mt-3">
                  <button class="btn btn-outline-usuario btn-sm w-100">
                    <i class="bi bi-eye me-1"></i>Ver Detalles
                  </button>
                </div>
              </div>
            </div>

            <!-- Rutina 3 -->
            <div class="col-lg-4 col-md-6 mb-3">
              <div class="rutina-card">
                <div class="rutina-header">
                  <h5>Flexibilidad y Yoga</h5>
                  <span class="badge bg-info">Relajante</span>
                </div>
                <div class="rutina-info">
                  <div class="d-flex justify-content-between mb-2">
                    <span><i class="bi bi-clock me-1"></i>25 min</span>
                    <span><i class="bi bi-fire me-1"></i>120 kcal</span>
                  </div>
                  <div class="progress mb-2" style="height: 6px;">
                    <div class="progress-bar bg-success" style="width: 40%;"></div>
                  </div>
                  <small class="text-muted">Progreso: 2/5 ejercicios</small>
                </div>
                <div class="rutina-actions mt-3">
                  <button class="btn btn-usuario-primary btn-sm w-100">
                    <i class="bi bi-play me-1"></i>Empezar
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Rutinas Recomendadas -->
    <div class="row">
      <div class="col-12">
        <div class="glass-card">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4><i class="bi bi-star me-2"></i>Rutinas Recomendadas</h4>
            <a href="#" class="text-decoration-none">Ver todas</a>
          </div>
          
          <div class="row">
            <!-- Rutina Recomendada 1 -->
            <div class="col-lg-4 col-md-6 mb-3">
              <div class="rutina-card rutina-recommended">
                <div class="rutina-header">
                  <h5>Entrenamiento Funcional</h5>
                  <span class="badge bg-success">Nuevo</span>
                </div>
                <div class="rutina-info">
                  <div class="d-flex justify-content-between mb-2">
                    <span><i class="bi bi-clock me-1"></i>40 min</span>
                    <span><i class="bi bi-fire me-1"></i>320 kcal</span>
                  </div>
                  <p class="small text-muted">Perfecta para mejorar tu fuerza funcional y coordinación.</p>
                </div>
                <div class="rutina-actions mt-3">
                  <button class="btn btn-outline-usuario btn-sm w-100">
                    <i class="bi bi-plus me-1"></i>Agregar a Mis Rutinas
                  </button>
                </div>
              </div>
            </div>

            <!-- Rutina Recomendada 2 -->
            <div class="col-lg-4 col-md-6 mb-3">
              <div class="rutina-card rutina-recommended">
                <div class="rutina-header">
                  <h5>Abdominales Intenso</h5>
                  <span class="badge bg-danger">Avanzado</span>
                </div>
                <div class="rutina-info">
                  <div class="d-flex justify-content-between mb-2">
                    <span><i class="bi bi-clock me-1"></i>20 min</span>
                    <span><i class="bi bi-fire me-1"></i>200 kcal</span>
                  </div>
                  <p class="small text-muted">Rutina intensa para fortalecer el core y definir abdominales.</p>
                </div>
                <div class="rutina-actions mt-3">
                  <button class="btn btn-outline-usuario btn-sm w-100">
                    <i class="bi bi-plus me-1"></i>Agregar a Mis Rutinas
                  </button>
                </div>
              </div>
            </div>

            <!-- Rutina Recomendada 3 -->
            <div class="col-lg-4 col-md-6 mb-3">
              <div class="rutina-card rutina-recommended">
                <div class="rutina-header">
                  <h5>Piernas y Glúteos</h5>
                  <span class="badge bg-primary">Intermedio</span>
                </div>
                <div class="rutina-info">
                  <div class="d-flex justify-content-between mb-2">
                    <span><i class="bi bi-clock me-1"></i>50 min</span>
                    <span><i class="bi bi-fire me-1"></i>400 kcal</span>
                  </div>
                  <p class="small text-muted">Tonifica y fortalece el tren inferior de manera efectiva.</p>
                </div>
                <div class="rutina-actions mt-3">
                  <button class="btn btn-outline-usuario btn-sm w-100">
                    <i class="bi bi-plus me-1"></i>Agregar a Mis Rutinas
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>