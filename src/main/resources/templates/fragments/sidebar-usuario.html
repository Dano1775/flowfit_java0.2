<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
  <nav th:fragment="sidebar" class="sidebar-base sidebar-usuario d-flex flex-column" id="sidebar">
    <!-- Logo y Título -->
    <a th:href="@{/usuario/dashboard}" class="navbar-brand d-flex align-items-center text-decoration-none">
      <img src="/assets/logo_flowfit_usuario.png" alt="FlowFit" height="40" class="me-3 logo-flowfit">
      <span class="brand-text">FlowFit</span>
    </a>

    <!-- Navegación Principal -->
    <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item">
        <a th:href="@{/usuario/dashboard}" 
           th:class="${currentPage == 'dashboard'} ? 'nav-link-base nav-link-usuario active' : 'nav-link-base nav-link-usuario'" 
           title="Dashboard">
          <i class="bi bi-speedometer2 me-3"></i>
          <span class="nav-text">Dashboard</span>
        </a>
      </li>
      <li class="nav-item">
        <a th:href="@{/usuario/rutinas}" 
           th:class="${currentPage == 'rutinas'} ? 'nav-link-base nav-link-usuario active' : 'nav-link-base nav-link-usuario'" 
           title="Mis Rutinas">
          <i class="bi bi-journal-text me-3"></i>
          <span class="nav-text">Mis Rutinas</span>
        </a>
      </li>
      <li class="nav-item">
        <a th:href="@{/entrenador/planes/explorar}" 
           th:class="${currentPage == 'explorar-planes' or currentPage == 'marketplace'} ? 'nav-link-base nav-link-usuario active' : 'nav-link-base nav-link-usuario'" 
           title="Marketplace">
          <i class="bi bi-shop-window me-3"></i>
          <span class="nav-text">Marketplace</span>
        </a>
      </li>
      <li class="nav-item">
        <a th:href="@{/usuario/progreso}" 
           th:class="${currentPage == 'progreso'} ? 'nav-link-base nav-link-usuario active' : 'nav-link-base nav-link-usuario'" 
           title="Mi Progreso">
          <i class="bi bi-graph-up me-3"></i>
          <span class="nav-text">Mi Progreso</span>
        </a>
      </li>
      <li class="nav-item">
        <a th:href="@{/chat}" 
           th:class="${currentPage == 'chat'} ? 'nav-link-base nav-link-usuario active' : 'nav-link-base nav-link-usuario'" 
           title="Mensajes">
          <i class="bi bi-chat-dots me-3"></i>
          <span class="nav-text">Mensajes</span>
        </a>
      </li>
      <li class="nav-item">
        <a th:href="@{/usuario/mapa}" 
           th:class="${currentPage == 'mapa'} ? 'nav-link-base nav-link-usuario active' : 'nav-link-base nav-link-usuario'" 
           title="Mapa de Gimnasios">
          <i class="bi bi-geo-alt me-3"></i>
          <span class="nav-text">Mapa de Gimnasios</span>
        </a>
      </li>
    </ul>

    <!-- Perfil del Usuario -->
    <div class="border-top pt-3 mt-auto">
      <div class="dropdown profile-dropdown-base">
        <div class="profile-icon-base d-flex align-items-center w-100" id="profileDropdownUsuario" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="/assets/perfil_default.png" alt="Profile" class="profile-image-base me-2" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
          <div class="flex-grow-1">
            <div class="small fw-bold text-white" th:text="${usuario != null ? #strings.substringBefore(usuario.nombre, ' ') : 'Usuario'}">Usuario</div>
            <div class="small text-muted-flowfit">Usuario</div>
          </div>
          <i class="bi bi-chevron-down text-white"></i>
        </div>
        <ul class="dropdown-menu" aria-labelledby="profileDropdownUsuario">
          <li><a class="dropdown-item" th:href="@{/usuario/perfil}"><i class="bi bi-person me-2"></i>Mi Perfil</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item text-danger" th:href="@{/logout}"><i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión</a></li>
        </ul>
      </div>
    </div>
  </nav>
</body>
</html>
