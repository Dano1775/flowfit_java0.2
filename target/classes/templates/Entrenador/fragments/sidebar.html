<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
    <!-- Sidebar Fragment -->
    <nav th:fragment="sidebar(currentPage)" class="sidebar-flowfit" id="sidebar">
        <!-- Sidebar Header -->
        <div class="sidebar-header">
            <img th:src="@{/assets/logo_flowfit_usuario.png}" alt="FlowFit" class="sidebar-logo">
            <div class="sidebar-brand">FlowFit Coach</div>
        </div>

        <!-- Navigation Menu -->
        <ul class="sidebar-nav list-unstyled">
            <li class="nav-item">
                <a th:href="@{/entrenador/dashboard}" class="nav-link-flowfit"
                   th:classappend="${currentPage == 'dashboard'} ? 'active'">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a th:href="@{/entrenador/mis-usuarios}" class="nav-link-flowfit"
                   th:classappend="${currentPage == 'mis-usuarios'} ? 'active'">
                    <i class="bi bi-people"></i>
                    <span>Mis Usuarios</span>
                </a>
            </li>
            <li class="nav-item">
                <a th:href="@{/entrenador/crear-rutinas}" class="nav-link-flowfit"
                   th:classappend="${currentPage == 'crear-rutinas'} ? 'active'">
                    <i class="bi bi-plus-circle"></i>
                    <span>Crear Rutinas</span>
                </a>
            </li>
            <li class="nav-item">
                <a th:href="@{/entrenador/ver-rutinas}" class="nav-link-flowfit"
                   th:classappend="${currentPage == 'ver-rutinas'} ? 'active'">
                    <i class="bi bi-journal-text"></i>
                    <span>Ver Rutinas</span>
                </a>
            </li>
            <li class="nav-item">
                <a th:href="@{/entrenador/asignar-rutinas}" class="nav-link-flowfit"
                   th:classappend="${currentPage == 'asignar-rutinas'} ? 'active'">
                    <i class="bi bi-person-check"></i>
                    <span>Asignar Rutinas</span>
                </a>
            </li>
            <li class="nav-item">
                <a th:href="@{/entrenador/progreso-usuarios}" class="nav-link-flowfit"
                   th:classappend="${currentPage == 'progreso-usuarios'} ? 'active'">
                    <i class="bi bi-graph-up"></i>
                    <span>Progreso de Usuarios</span>
                </a>
            </li>
        </ul>

        <!-- Profile Section -->
        <div class="sidebar-profile">
            <div class="profile-info">
                <img th:src="@{/assets/perfil_default.png}" alt="Perfil" class="profile-avatar">
                <div class="profile-details">
                    <h6 th:text="${entrenador.nombre}">Nombre del Entrenador</h6>
                    <small th:text="${entrenador.correo}">correo@entrenador.com</small>
                </div>
            </div>
            <a th:href="@{/logout}" class="btn-logout">
                <i class="bi bi-box-arrow-right me-1"></i>
                Cerrar Sesi√≥n
            </a>
        </div>
    </nav>

    <!-- Mobile Toggle Fragment -->
    <div th:fragment="mobileToggle" class="mobile-toggle d-md-none" onclick="toggleSidebar()">
        <i class="bi bi-list"></i>
    </div>

    <!-- Sidebar Overlay Fragment -->
    <div th:fragment="sidebarOverlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <!-- JavaScript Functions Fragment -->
    <div th:fragment="sidebarScript">
        <script>
            // Sidebar Toggle Function
            function toggleSidebar() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.querySelector('.sidebar-overlay');
                const mainContent = document.getElementById('mainContent');
                
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
                
                if (window.innerWidth >= 768) {
                    mainContent.classList.toggle('sidebar-open');
                }
            }

            // Auto-open sidebar on desktop
            function handleResize() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.querySelector('.sidebar-overlay');
                const mainContent = document.getElementById('mainContent');
                
                if (window.innerWidth >= 768) {
                    sidebar.classList.add('active');
                    mainContent.classList.add('sidebar-open');
                    overlay.classList.remove('active');
                } else {
                    sidebar.classList.remove('active');
                    mainContent.classList.remove('sidebar-open');
                    overlay.classList.remove('active');
                }
            }

            // Initialize
            document.addEventListener('DOMContentLoaded', function() {
                handleResize();
                
                // Auto-hide alerts
                const alerts = document.querySelectorAll('.alert-flowfit');
                alerts.forEach(alert => {
                    setTimeout(() => {
                        alert.style.opacity = '0';
                        setTimeout(() => alert.remove(), 300);
                    }, 5000);
                });
            });

            // Handle window resize
            window.addEventListener('resize', handleResize);
        </script>
    </div>
</body>
</html>